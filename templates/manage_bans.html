<form method="POST" action="/manage?action=bans">
<input type="hidden" name="do" value="add" />
<h2>Add IP ban</h2>
<table>
	<tr><th>IP address</th><td><input type="text" name="ip" value="{{.post.IP}}" /></td></tr>
	<tr><th>Duration</th><td><input type="text" name="duration" /></td></tr>
	<tr><th></th><td>e.g. '1y2mo3w4d5h6m7s',<br />'1 year 2 months 3 weeks 4 days 5 hours 6 minutes 7 seconds'<br/>Optional if "Permanent" is checked, required otherwise</td></tr>
	<tr><th>Permanent</th><td><input type="checkbox" name="permanent" id="permanent" {{with $.permanent}}{{if eq $.permanent "on"}}checked{{end}}{{end}}> (overrides the duration)</td></tr>
	<tr><th>Appeal wait time</th><td><input type="text" name="appealwait" id="appealwait"></td></tr>
	<tr><th></th><td>Same syntax as above, but optional.</td></tr>
	<tr><th>Thread starting ban</th><td><input type="checkbox" name="threadban" /></td></tr>
		{{with $.bannedForPostID}}<tr><th>Banned for post ID</th><td>{{$.bannedForPostID}}</td></tr>{{end}}
	<tr><th>Board</th><td><select name="boardid" id="boardid">
		<option value="0">All boards</option>
	{{- range $b, $board := $.allBoards -}}
		<option value="{{$board.ID}}" {{if eq $.boardid $board.ID}}selected{{end}}>/{{$board.Dir}}/ - {{$board.Title}}</option>
	{{- end -}}
	</select></td></tr>
	<tr><th>Reason</th><td><textarea name="reason" rows="5" cols="30" placeholder="Message to be displayed to the banned user"></textarea></td></tr>
	<tr><th>Staff note</th><td><textarea name="staffnote" rows="5" cols="30" placeholder="Private note that only staff can see"></textarea></td></tr>
</table>
<input type="submit" value="Ban user" /> <input type="button" name="docancel" value="Cancel" onclick="window.location = './manage?action=bans'; return false"/>
</form>

<h2 class="manage-header">Banlist</h2>
<table border="1">
	<tr><th>IP</th><th>Board</th><th>Reason</th><th>Staff</th><th>Staff note</th><th>Banned post text</th><th>Set</th><th>Expires</th><th>Appeal at</th></tr>
{{range $_, $ban := $.banlist -}}
	<tr>
		<td>{{$ban.IP}}</td>
		<td>{{if not $ban.BoardID}}<i>all</i>{{else}}/{{getBoardDirFromID $ban.BoardID}}/{{end}}</td>
		<td>{{$ban.Message}}</td>
		<td>{{getStaffNameFromID $ban.StaffID}}</td>
		<td>{{$ban.StaffNote}}</td>
		<td>{{if not $ban.BannedForPostID}}<i>N/A</i>{{else}}{{$ban.CopyPostText}}{{end}}</td>
		<td>{{formatTimestamp $ban.IssuedAt}}</td>
		<td>
			{{- if $ban.Permanent}}<i>Never</i>{{else}}{{formatTimestamp $ban.ExpiresAt}}{{end -}}
		</td>
		<td>
			{{- if $ban.CanAppeal}}{{formatTimestamp $ban.AppealAt}}{{else}}<i>Never</i>{{end -}}
		</td>
	</tr>
{{end}}</table>