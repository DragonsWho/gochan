{"version":3,"file":"../gochan.js","sources":["gochan.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCookie = getCookie;\nexports.initCookies = initCookies;\nexports.setCookie = setCookie;\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction getCookie(name, defaultVal) {\n  var val = defaultVal;\n  var cookieArr = document.cookie.split(\"; \");\n\n  var _iterator = _createForOfIteratorHelper(cookieArr),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var cookie = _step.value;\n      var pair = cookie.split(\"=\");\n      if (pair[0] != name) continue;\n\n      try {\n        val = decodeURIComponent(pair[1]);\n      } catch (err) {\n        return defaultVal;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return val;\n}\n\nfunction initCookies() {\n  $(\"input[name=postname]\").val(getCookie(\"name\", \"\"));\n  $(\"input[name=postemail]\").val(getCookie(\"email\", \"\"));\n  $(\"input[name=postpassword]\").val(getCookie(\"password\", \"\"));\n  $(\"input[name=delete-password]\").val(getCookie(\"password\", \"\"));\n}\n\nfunction setCookie(name, value, expires) {\n  var expiresStr = \"\";\n\n  if (expires) {\n    expiresStr = \";expires=\";\n    var d = new Date();\n    d.setTime(d.getTime() + 1000 * 60 * 60 * 24 * expires);\n    expiresStr += d.toUTCString();\n  }\n\n  document.cookie = \"\".concat(name, \"=\").concat(escape(value)).concat(expiresStr, \";path=\").concat(webroot, \";sameSite=strict\");\n}\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toTop = toTop;\nexports.toBottom = toBottom;\nexports.changePage = changePage;\nexports.getPageThread = getPageThread;\n\nvar _cookies = require(\"./cookies\");\n\nvar _manage = require(\"./manage\");\n\nvar _postutil = require(\"./postutil\");\n\nvar _settings = require(\"./settings\");\n\nvar _topbar = require(\"./topbar\");\n\nvar _qr = require(\"./qr\");\n\nvar _vars = require(\"./vars\");\n\nvar currentStaff = null;\nvar $watchedThreadsBtn = null;\nvar $staffBtn = null;\nconsole.log(\"Hello gochan.js!\");\n\nfunction toTop() {\n  window.scrollTo(0, 0);\n}\n\nwindow.toTop = toTop;\n\nfunction toBottom() {\n  window.scrollTo(0, document.body.scrollHeight);\n}\n\nwindow.toBottom = toBottom;\n\nfunction changePage(sel) {\n  var info = getPageThread();\n  if (info.board == \"\" || info.op == -1) return;\n  if (sel.value != \"\") window.location = webroot + info.board + \"/res/\" + info.op + \"p\" + sel.value + \".html\";\n}\n\nfunction getBoard() {\n  var rootIndex = window.location.pathname.indexOf(webroot);\n  var board = window.location.pathname.substring(rootIndex + webroot.length);\n\n  if (board.length > 0 && board.indexOf(\"/\") > -1) {\n    board = board.split(\"/\")[0];\n  } else {\n    board = \"\";\n  }\n\n  return board;\n}\n\nfunction getPageThread() {\n  var arr = _vars.opRegex.exec(window.location.pathname);\n\n  var info = {\n    board: getBoard(),\n    boardID: -1,\n    op: -1,\n    page: 0\n  };\n  if (arr == null) return info;\n  if (arr.length > 1) info.op = arr[1];\n  if (arr.length > 3) info.page = arr[3];\n  if (arr.board != \"\") info.boardID = $(\"form#postform input[name=boardid]\").val() - 1;\n  return info;\n}\n\nfunction handleKeydown(e) {\n  var tag = \"\";\n  if (!e.ctrlKey || e.target.nodeName != \"TEXTAREA\") return;\n\n  switch (e.keyCode) {\n    case 10:\n    case 13:\n      document.getElementById(\"postform\").submit();\n      break;\n\n    case 66:\n      tag = \"b\";\n      break;\n\n    case 73:\n      tag = \"i\";\n      break;\n\n    case 82:\n      tag = \"s\";\n      break;\n\n    case 83:\n      tag = \"?\";\n      break;\n\n    case 85:\n      tag = \"u\";\n      break;\n  }\n\n  if (tag == \"\") return;\n  e.preventDefault();\n  var ta = e.target;\n  var val = ta.value;\n  var ss = ta.selectionStart;\n  var se = ta.selectionEnd;\n  var r = se + 2 + tag.length;\n  ta.value = val.slice(0, ss) + (\"[\" + tag + \"]\") + val.slice(ss, se) + (\"[/\" + tag + \"]\") + val.slice(se);\n  ta.setSelectionRange(r, r);\n}\n\n$(function () {\n  var pageThread = getPageThread();\n  var style = (0, _cookies.getCookie)(\"style\", defaultStyle);\n  var themeElem = document.getElementById(\"theme\");\n  if (themeElem) themeElem.setAttribute(\"href\", \"\".concat(webroot, \"css/\").concat(style));\n  currentStaff = (0, _manage.getStaff)();\n  (0, _cookies.initCookies)();\n  (0, _topbar.initTopBar)();\n  (0, _settings.initSettings)();\n  $watchedThreadsBtn = new _topbar.TopBarButton(\"WT\", function () {});\n\n  if (currentStaff.rank > 0) {\n    $staffBtn = new _topbar.TopBarButton(\"Staff\", function () {\n      window.location = \"/manage?action=dashboard\";\n    });\n  }\n\n  if (pageThread.board != \"\") {\n    (0, _postutil.prepareThumbnails)();\n    if ((0, _cookies.getCookie)(\"useqr\") == \"true\") (0, _qr.initQR)(pageThread);\n  }\n\n  (0, _postutil.preparePostPreviews)(false);\n  $(\".plus\").click(function () {\n    var block = $(this).parent().next();\n\n    if (block.css(\"display\") == \"none\") {\n      block.show();\n      $(this).html(\"-\");\n    } else {\n      block.hide();\n      $(this).html(\"+\");\n    }\n  });\n  var threadMenuOpen = false;\n  $(\".thread-ddown a, body\").click(function (e) {\n    e.stopPropagation();\n    var postID = $(this).parent().parent().parent().attr(\"id\");\n    var isOP = $(this).parent().parent().parent().attr(\"class\") == \"thread\";\n    if (postID == undefined) return;\n\n    if ($(this).parent().find(\"div.thread-ddown-menu\").length == 0) {\n      $(\"div.thread-ddown-menu\").remove();\n      var menuHTML = \"<div class=\\\"thread-ddown-menu\\\" id=\\\"\".concat(postID, \"\\\">\");\n      if (!isOP) menuHTML += \"<ul><li><a href=\\\"javascript:hidePost(\".concat(postID, \");\\\" class=\\\"hide-post\\\">Show/Hide post</a></li>\");\n      menuHTML += \"<li><a href=\\\"javascript:deletePost(\".concat(postID, \");\\\" class=\\\"delete-post\\\">Delete post</a></li>\") + \"<li><a href=\\\"javascript:reportPost(\".concat(postID, \");\\\" class=\\\"report-post\\\">Report Post</a></li></ul></div>\");\n      $(this).parent().append(menuHTML);\n      threadMenuOpen = true;\n    } else {\n      $(\"div.thread-ddown-menu\").remove();\n      threadMenuOpen = false;\n    }\n  });\n  $(document).keydown(handleKeydown);\n});\n\n},{\"./cookies\":1,\"./manage\":4,\"./postutil\":5,\"./qr\":6,\"./settings\":7,\"./topbar\":8,\"./vars\":9}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.showLightBox = showLightBox;\nexports.showMessage = showMessage;\n\nfunction showLightBox(title, innerHTML) {\n  $(document.body).prepend(\"<div class=\\\"lightbox-bg\\\"></div><div class=\\\"lightbox\\\"><div class=\\\"lightbox-title\\\">\".concat(title, \"<a href=\\\"#\\\" class=\\\"lightbox-x\\\">X</a><hr /></div>\").concat(innerHTML, \"</div>\"));\n  $(\"a.lightbox-x, .lightbox-bg\").click(function () {\n    $(\".lightbox, .lightbox-bg\").remove();\n  });\n}\n\nfunction showMessage(msg) {\n  $(document.body).prepend(\"<div class=\\\"lightbox-bg\\\"></div><div class=\\\"lightbox-msg\\\">\".concat(msg, \"<br /><button class=\\\"lightbox-msg-ok\\\" style=\\\"float: right; margin-top: 8px;\\\">OK</button></div>\"));\n  var centeroffset = parseInt($(\".lightbox-msg\").css(\"transform-origin\").replace(\"px\", \"\"), 10) + $(\".lightbox-msg\").width() / 2;\n  $(\".lightbox-msg\").css({\n    \"position\": \"fixed\",\n    \"left\": $(document).width() / 2 - centeroffset / 2 - 16\n  });\n  $(\".lightbox-msg-ok, .lightbox-bg\").click(function () {\n    $(\".lightbox-msg, .lightbox-bg\").remove();\n  });\n}\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getStaff = getStaff;\nexports.getManagePage = getManagePage;\nexports.banSelectedPost = banSelectedPost;\nexports.getStaffMenuHTML = getStaffMenuHTML;\nexports.openStaffLightBox = openStaffLightBox;\nexports.Staff = void 0;\n\nvar _lightbox = require(\"./lightbox\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Staff = function () {\n  function Staff(name, rank, boards) {\n    _classCallCheck(this, Staff);\n\n    this.name = name;\n    this.rank = rank;\n    this.boards = boards;\n  }\n\n  _createClass(Staff, null, [{\n    key: \"makeNew\",\n    value: function makeNew() {\n      var onManagePage = false;\n\n      if (window.location.pathname == \"/manage\") {\n        onManagePage = true;\n      } else {\n        var usernameTxt = $(\"input#username\").val();\n        var passwordTxt = $(\"input#password\").val();\n        var rankSel = $(\"select#rank\").val();\n        $.ajax({\n          method: 'POST',\n          url: \"\".concat(webroot, \"manage?action=staff\"),\n          data: {\n            \"do\": \"add\",\n            username: usernameTxt,\n            password: passwordTxt,\n            rank: rankSel,\n            boards: \"all\"\n          },\n          cache: false,\n          async: true,\n          success: function success(result) {\n            var rankStr = \"\";\n\n            switch (rankSel) {\n              case \"3\":\n                rankStr = \"admin\";\n                break;\n\n              case \"2\":\n                rankStr = \"mod\";\n                break;\n\n              case \"1\":\n                rankStr = \"janitor\";\n                break;\n            }\n\n            $(\"table#stafftable tr:last\").after(\"<tr><td>\".concat(usernameTxt, \"</td><td>\").concat(rankStr, \"</td><td>all</td><td>now</td><td></td></tr>\"));\n          },\n          error: function error() {\n            alert(\"Something went wrong...\");\n          }\n        });\n      }\n\n      return onManagePage;\n    }\n  }, {\n    key: \"getStaff\",\n    value: function getStaff() {\n      var s = null;\n      $.ajax({\n        method: 'GET',\n        url: \"\".concat(webroot, \"manage\"),\n        data: {\n          action: 'getstaffjquery'\n        },\n        dataType: \"text\",\n        cache: true,\n        async: false,\n        success: function success(result) {\n          var data = JSON.parse(result);\n          s = new Staff(data.Username, data.Rank, \"\");\n        },\n        error: function error() {\n          s = new Staff(\"nobody\", \"0\", \"\");\n        }\n      });\n      return s;\n    }\n  }]);\n\n  return Staff;\n}();\n\nexports.Staff = Staff;\n\nfunction getStaff() {\n  return Staff.getStaff();\n}\n\nfunction getManagePage() {}\n\nfunction banSelectedPost() {\n  var boardDirArr = location.pathname.split(\"/\");\n  if (boardDirArr.length < 2) return;\n  var boardDir = boardDirArr[1];\n  var checks = $(\"input[type=checkbox]\");\n\n  if (checks.length == 0) {\n    alert(\"No posts selected\");\n    return false;\n  }\n\n  var postID = 0;\n\n  for (var i = 0; i < checks.length; i++) {\n    if (checks[i].id.indexOf(\"check\") == 0) {\n      postID = checks[i].id.replace(\"check\", \"\");\n      break;\n    }\n  }\n\n  window.location = \"\".concat(webroot, \"manage?action=bans&dir=\").concat(boardDir, \"&postid=\").concat(postID);\n}\n\nfunction getStaffMenuHTML() {\n  var s = \"<ul class=\\\"staffmenu\\\">\";\n  $.ajax({\n    method: 'GET',\n    url: webroot + \"manage\",\n    data: {\n      action: 'staffmenu'\n    },\n    dataType: \"text\",\n    cache: true,\n    async: false,\n    success: function success(result) {\n      var lines = result.substring(result.indexOf(\"body>\") + 5, result.indexOf(\"</body\")).trim().split(\"\\n\");\n\n      for (var l = 0; l < lines.length; l++) {\n        if (lines[l] != \"\") {\n          if (lines[l].indexOf(\"<a href=\") > -1) {\n            s += lines[l].substr(0, lines[l].indexOf(\"\\\">\") + 2) + \"<li>\" + $(lines[l]).text() + \"</li></a>\";\n          } else {\n            s += \"<li>\".concat(lines[1], \"</li>\");\n          }\n        }\n      }\n    },\n    error: function error() {\n      s = \"Something went wrong :/\";\n    }\n  });\n  return s + \"</ul>\";\n}\n\nfunction openStaffLightBox(actionURL) {\n  $.ajax({\n    method: 'GET',\n    url: \"\".concat(webroot, \"manage\"),\n    data: {\n      action: actionURL\n    },\n    dataType: \"html\",\n    async: false,\n    success: function success(result) {\n      var body = \"<div id=\\\"body-mock\\\">\".concat(result.replace(/^[\\s\\S]*<body.*?>|<\\/body>[\\s\\S]*$/ig, \"\"), \"</div>\");\n      var $body = $(body);\n      var header = $body.find(\"h1\");\n      var headerText = header.text();\n      header.remove();\n      if (headerText == \"\") headerText = \"Manage\";\n      (0, _lightbox.showLightBox)(headerText, $body.html());\n    },\n    error: function error(result) {\n      var responseText = result.responseText;\n      header = responseText.substring(responseText.indexOf(\"<h1>\") + 4, responseText.indexOf(\"</h1>\"));\n      responseText = responseText.substring(responseText.indexOf(\"</h1>\") + 5, responseText.indexOf(\"</body>\"));\n\n      if (header == \"\") {\n        (0, _lightbox.showLightBox)(\"Manage\", responseText);\n      } else {\n        (0, _lightbox.showLightBox)(header, responseText);\n      }\n    }\n  });\n}\n\n},{\"./lightbox\":3}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getUploadPostID = getUploadPostID;\nexports.hidePost = hidePost;\nexports.insideOP = insideOP;\nexports.preparePostPreviews = preparePostPreviews;\nexports.prepareThumbnails = prepareThumbnails;\nexports.quote = quote;\nvar movablePostPreviews = null;\nvar expandablePostrefs = true;\nvar videoTestRE = /\\.(mp4)|(webm)$/;\n\nfunction deleteCheckedPosts() {\n  if (confirm('Are you sure you want to delete these posts?') == true) {\n    var form = $(\"form#main-form\");\n    form.append(\"<input type=\\\"hidden\\\" name=\\\"action\\\" value=\\\"delete\\\" \");\n    form.get(0).submit();\n    return true;\n  }\n\n  return false;\n}\n\nwindow.deleteCheckedPosts = deleteCheckedPosts;\n\nfunction deletePost(id, board) {\n  var password = prompt(\"Password\");\n}\n\nwindow.deletePost = deletePost;\n\nfunction getUploadPostID(upload, container) {\n  var jqu = container ? $(upload) : $(upload).parent();\n  if (insideOP(jqu)) return jqu.siblings().eq(4).text();else return jqu.siblings().eq(3).text();\n}\n\nfunction hidePost(id) {\n  var posttext = $(\"div#\" + id + \".post .posttext\");\n  if (posttext.length > 0) posttext.remove();\n  var fileinfo = $(\"div#\" + id + \".post .file-info\");\n  if (fileinfo.length > 0) fileinfo.remove();\n  var postimg = $(\"div#\" + id + \".post img\");\n  if (postimg.length > 0) postimg.remove();\n}\n\nfunction insideOP(elem) {\n  return $(elem).parents(\"div.op-post\").length > 0;\n}\n\nfunction preparePostPreviews(isInline) {\n  var _this = this;\n\n  var mType = \"mousemove\";\n  if (!movablePostPreviews) mType = \"mouseover\";\n  var hvrStr = \"a.postref\";\n  if (isInline) hvr_str = \"div.inlinepostprev \" + hvr_str;\n  $(hvrStr).hover(function () {\n    var replaced = _this.innerHTML.replace(\"&gt;&gt;\", \"\");\n\n    var postID = \"div.reply#reply\".concat(replaced, \",div.op-post#op\").concat(replaced);\n    var $clone = $(postID).clone();\n    $(document.body).append($clone.attr({\n      \"class\": \"postprev\",\n      id: postID + \"preview\"\n    }));\n    $clone.find(\".inlinepostprev\").remove();\n    $(document).bind(mType, function (e) {\n      $('.postprev').css({\n        left: e.pageX + 8,\n        top: e.pageY + 8\n      });\n    });\n  }, function () {\n    $(\".postprev\").remove();\n  });\n\n  if (expandablePostrefs) {\n    var clkStr = \"a.postref\";\n    if (isInline) clkStr = \"div.inlinepostprev \" + clkStr;\n    $(clkStr).click(function () {\n      var $this = $(_this);\n\n      if ($this.next().attr(\"class\") != \"inlinepostprev\") {\n        $(\".postprev\").remove();\n\n        var replaced = _this.innerHTML.replace(\"&gt;&gt;\", \"\");\n\n        var postID = \"div.reply#reply\".concat(replaced, \",div.op-post#op\").concat(replaced);\n        var $clone = $(postID).clone();\n        $clone.find(\"postprev\").remove();\n        $this.after($clone.attr(\"class\", \"inlinepostprev\"));\n      } else {\n        $this.next().remove();\n      }\n\n      return false;\n    });\n  }\n}\n\nfunction prepareThumbnails() {\n  $(\"a.upload-container\").click(function (e) {\n    var _this2 = this;\n\n    e.preventDefault();\n    var a = $(this);\n    var thumb = a.find(\"img.upload\");\n    var thumbURL = thumb.attr(\"src\");\n    var uploadURL = thumb.attr(\"alt\");\n    thumb.removeAttr(\"width\").removeAttr(\"height\");\n    var fileInfoElement = a.prevAll(\".file-info:first\");\n\n    if (videoTestRE.test(thumbURL + uploadURL)) {\n      thumb.hide();\n      var video = $(\"<video />\").prop({\n        src: uploadURL,\n        autoplay: true,\n        controls: true,\n        \"class\": \"upload\",\n        loop: true\n      }).insertAfter(fileInfoElement);\n      fileInfoElement.append($(\"<a />\").prop(\"href\", \"javascript:;\").click(function (e) {\n        video.remove();\n        thumb.show();\n\n        _this2.remove();\n\n        thumb.prop({\n          src: thumbURL,\n          alt: uploadURL\n        });\n      }).css({\n        \"padding-left\": \"8px\"\n      }).html(\"[Close]<br />\"));\n    } else {\n      thumb.attr({\n        src: uploadURL,\n        alt: thumbURL\n      });\n    }\n\n    return false;\n  });\n}\n\nfunction quote(e) {\n  var msgboxID = \"postmsg\";\n\n  if (document.selection) {\n    document.getElementById(msgboxID).focus();\n    var t = document.getselection.createRange();\n    t.text = \">>\".concat(e, \"\\n\");\n  } else if (document.getElementById(msgboxID).selectionStart || \"0\" == document.getElementById(msgboxID).selectionStart) {\n    var n = document.getElementById(msgboxID).selectionStart,\n        o = document.getElementById(msgboxID).selectionEnd;\n    document.getElementById(msgboxID).value = document.getElementById(msgboxID).value.substring(0, n) + \">>\" + e + \"\\n\" + document.getElementById(msgboxID).value.substring(o, document.getElementById(msgboxID).value.length);\n  } else document.getElementById(msgboxID).value += \">>\".concat(e, \"\\n\");\n\n  window.scroll(0, document.getElementById(msgboxID).offsetTop - 48);\n}\n\nfunction reportPost(id, board) {\n  var reason = prompt(\"Reason\");\n  if (reason == \"\") return;\n}\n\nwindow.reportPost = reportPost;\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.initQR = initQR;\nexports.closeQR = closeQR;\nexports.$qr = void 0;\n\nvar _vars = require(\"./vars\");\n\nvar _cookies = require(\"./cookies\");\n\nvar _topbar = require(\"./topbar\");\n\nvar $qr = null;\nexports.$qr = $qr;\nvar qrButtonHTML = \"<input type=\\\"file\\\" id=\\\"imagefile\\\" name=\\\"imagefile\\\" style=\\\"display: none;\\\" />\" + \"<input name=\\\"imagefilebtn\\\" type=\\\"button\\\" onclick=\\\"document.getElementById('imagefile').click();\\\" value=\\\"Browse...\\\">\" + \"<input type=\\\"submit\\\" value=\\\"Post\\\" style=\\\"float:right;\\\"/>\";\nvar qrTitleBar = \"<div id=\\\"qr-title\\\">\" + \"<span id=\\\"qr-message\\\"></span>\" + \"<span id=\\\"qr-buttons\\\"><a href=\\\"javascript:toBottom();\\\">\".concat(_vars.downArrow, \"</a>\") + \"<a href=\\\"javascript:toTop();\\\">\".concat(_vars.upArrow, \"</a><a href=\\\"javascript:closeQR();\\\">X</a></span></div>\");\n\nfunction initQR(pageThread) {\n  var nameCookie = (0, _cookies.getCookie)(\"name\", \"\");\n  var emailCookie = (0, _cookies.getCookie)(\"email\", \"\");\n  var qrFormHTML = \"<input type=\\\"hidden\\\" name=\\\"threadid\\\" value=\\\"\".concat(pageThread.op, \"\\\" />\") + \"<input type=\\\"hidden\\\" name=\\\"boardid\\\" value=\\\"1\\\" />\" + \"<div id=\\\"qrpostname\\\"><input id=\\\"qrpostname\\\" type=\\\"text\\\" name=\\\"postname\\\" value=\\\"\".concat(nameCookie, \"\\\" placeholder=\\\"Name\\\"/></div>\") + \"<div id=\\\"qrpostemail\\\"><input id=\\\"qrpostemail\\\" type=\\\"text\\\" name=\\\"postemail\\\" value=\\\"\".concat(emailCookie, \"\\\" placeholder=\\\"Email\\\"/></div>\") + \"<div id=\\\"qrpostsubject\\\"><input id=\\\"qrpostsubject\\\" type=\\\"text\\\" name=\\\"postsubject\\\" placeholder=\\\"Subject\\\"/></div>\" + \"<div id=\\\"qrpostmsg\\\"><textarea id=\\\"qrpostmsg\\\" name=\\\"postmsg\\\" id=\\\"postmsg\\\" placeholder=\\\"Message\\\"></textarea></div>\";\n  var $qrbuttons = $(\"<div />\").prop(\"id\", \"qrbuttons\").append(qrButtonHTML);\n  var $postform = $(\"<form />\").prop({\n    id: \"qrpostform\",\n    name: \"qrpostform\",\n    action: \"/post\",\n    method: \"POST\",\n    enctype: \"multipart/form-data\"\n  }).append(qrFormHTML, $qrbuttons);\n  var qrTop = 32;\n  if (!(0, _cookies.getCookie)(\"pintopbar\", true)) qrTop = _topbar.$topbar.outerHeight() + 16;\n  var qrPos = JSON.parse((0, _cookies.getCookie)(\"qrpos\", JSON.stringify({\n    top: qrTop,\n    left: 16\n  })));\n  exports.$qr = $qr = $(\"<div />\").prop({\n    id: \"qr-box\",\n    style: \"top: \".concat(qrPos.top, \"px;left: \").concat(qrPos.left, \"px; position:fixed;\")\n  }).append($(qrTitleBar), $postform).draggable({\n    handle: \"div#qr-title\",\n    scroll: false,\n    containment: \"window\",\n    drag: function drag(event, ui) {\n      ui.position.top = Math.max(ui.position.top, _topbar.topbarHeight);\n      (0, _cookies.setCookie)(\"qrpos\", JSON.stringify(ui.position), 7);\n    }\n  }).insertAfter(\"div#footer\");\n}\n\nfunction closeQR() {\n  if ($qr) $qr.remove();\n}\n\nwindow.closeQR = closeQR;\n\n},{\"./cookies\":1,\"./topbar\":8,\"./vars\":9}],7:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getSetting = getSetting;\nexports.initSettings = initSettings;\nexports.settings = exports.$settingsMenu = void 0;\n\nvar _lightbox = require(\"./lightbox\");\n\nvar _topbar = require(\"./topbar\");\n\nvar _cookies = require(\"./cookies\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar $settingsMenu = null;\nexports.$settingsMenu = $settingsMenu;\nvar settings = [];\nexports.settings = settings;\nvar settingsLB = null;\n\nfunction getSetting(id) {\n  for (var s = 0; s < settings.length; s++) {\n    if (settings[s].id == id) return settings[s];\n  }\n\n  return {};\n}\n\nvar Setting = function () {\n  function Setting(id, text, type, defaultVal, cb, options) {\n    _classCallCheck(this, Setting);\n\n    this.id = id;\n    this.text = text;\n    this.type = type;\n    this.defaultVal = defaultVal;\n    this.options = [];\n\n    if ((0, _cookies.getCookie)(this.id) == undefined) {\n      this.setCookie(this.defaultVal, 7);\n    }\n\n    if (this.type == \"select\") this.options = options;\n\n    this.cb = function () {};\n\n    if (cb) this.cb = cb;\n  }\n\n  _createClass(Setting, [{\n    key: \"save\",\n    value: function save(newVal, expires) {\n      (0, _cookies.setCookie)(this.id, newVal, expires);\n      this.cb();\n    }\n  }, {\n    key: \"getCookie\",\n    value: function getCookie(defaultVal) {\n      var val = (0, _cookies.getCookie)(this.id, defaultVal);\n      if (this.type == \"checkbox\") val = val == \"true\";\n      return val;\n    }\n  }, {\n    key: \"setCookie\",\n    value: function setCookie(val, expires) {\n      (0, _cookies.setCookie)(this.id, val, expires);\n    }\n  }, {\n    key: \"getVal\",\n    value: function getVal() {\n      var elem = document.getElementById(this.id);\n\n      if (elem != null) {\n        if (elem.type == \"checkbox\") return elem.checked;\n        return elem.value;\n      }\n    }\n  }, {\n    key: \"html\",\n    value: function html() {\n      var html = \"\";\n\n      switch (this.type) {\n        case \"checkbox\":\n          if (this.getCookie() == true) html = \"<input id=\\\"\".concat(this.id, \"\\\" type=\\\"checkbox\\\" checked=\\\"checked\\\" />\");else html = \"<input id=\\\"\".concat(this.id, \"\\\" type=\\\"checkbox\\\" />\");\n          break;\n\n        case \"select\":\n          html = \"<select id=\\\"\".concat(this.id, \"\\\" name=\\\"\").concat(this.id, \"\\\" style=\\\"min-width:50%\\\">\");\n\n          var _iterator = _createForOfIteratorHelper(this.options),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var option = _step.value;\n              html += \"<option value=\\\"\".concat(option.val, \"\\\"\");\n              if (this.getCookie() == option.val) html += \"selected=\\\"\".concat(this.getCookie(), \"\\\"\");\n              html += \">\".concat(option.text, \"</option>\");\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n\n          html += \"</select>\";\n          break;\n\n        case \"textarea\":\n          html = \"<textarea id=\\\"\".concat(this.id, \"\\\" name=\\\"\").concat(this.id, \"\\\">\").concat(this.getCookie(), \"</textarea>\");\n          break;\n\n        default:\n          html = \"<input id=\\\"\".concat(this.id, \"\\\" type=\\\"checkbox\\\" val=\\\"\").concat(this.getCookie(), \"\\\" />\");\n          break;\n      }\n\n      return html;\n    }\n  }]);\n\n  return Setting;\n}();\n\nfunction initSettings() {\n  var settingsHTML = \"<div id=\\\"settings-container\\\" style=\\\"overflow:auto\\\"><table width=\\\"100%\\\"><colgroup><col span=\\\"1\\\" width=\\\"50%\\\"><col span=\\\"1\\\" width=\\\"50%\\\"></colgroup>\";\n  settings.push(new Setting(\"style\", \"Style\", \"select\", defaultStyle, function () {\n    document.getElementById(\"theme\").setAttribute(\"href\", \"\".concat(webroot, \"css/\").concat(this.getCookie(defaultStyle)));\n  }, []), new Setting(\"pintopbar\", \"Pin top bar\", \"checkbox\", true), new Setting(\"enableposthover\", \"Preview post on hover\", \"checkbox\", true), new Setting(\"enablepostclick\", \"Preview post on click\", \"checkbox\", true), new Setting(\"useqr\", \"Use Quick Reply box\", \"checkbox\", true));\n\n  var _iterator2 = _createForOfIteratorHelper(styles),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var style = _step2.value;\n      settings[0].options.push({\n        text: style.Name,\n        val: style.Filename\n      });\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  var _iterator3 = _createForOfIteratorHelper(settings),\n      _step3;\n\n  try {\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      var setting = _step3.value;\n      settingsHTML += \"<tr><td><b>\".concat(setting.text, \";</b></td><td>\").concat(setting.html(), \"</td></tr>\");\n    }\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n\n  settingsHTML += \"</table></div><div class=\\\"lightbox-footer\\\"><hr /><button id=\\\"save-settings-button\\\">Save Settings</button></div>\";\n  exports.$settingsMenu = $settingsMenu = new _topbar.TopBarButton(\"Settings\", function () {\n    (0, _lightbox.showLightBox)(\"Settings\", settingsHTML);\n    $(\"button#save-settings-button\").click(function () {\n      var _iterator4 = _createForOfIteratorHelper(settings),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var setting = _step4.value;\n          setting.save(setting.getVal());\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    });\n  });\n}\n\n},{\"./cookies\":1,\"./lightbox\":3,\"./topbar\":8}],8:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.initTopBar = initTopBar;\nexports.DropDownMenu = exports.TopBarButton = exports.topbarHeight = exports.$topbar = void 0;\n\nvar _vars = require(\"./vars\");\n\nvar _cookies = require(\"./cookies\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar $topbar = null;\nexports.$topbar = $topbar;\nvar topbarHeight = 32;\nexports.topbarHeight = topbarHeight;\n\nvar TopBarButton = function TopBarButton(title) {\n  var onOpen = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n  var onClose = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n\n  _classCallCheck(this, TopBarButton);\n\n  this.title = title;\n  this.onOpen = onOpen;\n  this.onClose = onClose;\n  $topbar.append(\"<a href=\\\"javascript:;\\\" class=\\\"dropdown-button\\\" id=\\\"\".concat(title.toLowerCase(), \"\\\">\").concat(title).concat(_vars.downArrow, \"</a>\"));\n  var buttonOpen = false;\n  var self = this;\n  $topbar.find(\"a#\" + title.toLowerCase()).click(function (event) {\n    if (!buttonOpen) {\n      self.onOpen();\n      $(document).bind(\"click\", function () {\n        self.onClose();\n      });\n      buttonOpen = true;\n    } else {\n      self.onClose();\n      buttonOpen = false;\n    }\n\n    return false;\n  });\n};\n\nexports.TopBarButton = TopBarButton;\n\nfunction initTopBar() {\n  exports.$topbar = $topbar = $(\"div#topbar\");\n\n  if (!(0, _cookies.getCookie)(\"pintopbar\", true)) {\n    $topbar.css({\n      \"position\": \"absolute\",\n      \"top\": \"0px\",\n      \"padding-left\": \"0px\",\n      \"padding-right\": \"0px\"\n    });\n  }\n\n  exports.topbarHeight = topbarHeight = $topbar.outerHeight() + 4;\n}\n\nvar DropDownMenu = function DropDownMenu(title, menuHTML) {\n  _classCallCheck(this, DropDownMenu);\n\n  this.title = title;\n  this.menuHTML = menuHTML;\n  var titleLower = title.toLowerCase();\n  this.button = new TopBarButton(title, function () {\n    $topbar.after(\"<div id=\\\"\".concat(titleLower, \"-menu\\\" class=\\\"dropdown-menu\\\">\").concat(menuHTML, \"</div>\"));\n    $(\"a#\".concat(titleLower, \"-menu\")).children(0).text(title + _vars.upArrow);\n    $(\"div#\".concat(titleLower)).css({\n      top: $topbar.outerHeight()\n    });\n  }, function () {\n    $(\"div#\".concat(titleLower, \".dropdown-menu\")).remove();\n    $(\"a#\".concat(titleLower, \"-menu\")).children(0).html(title + _vars.downArrow);\n  });\n};\n\nexports.DropDownMenu = DropDownMenu;\n\n},{\"./cookies\":1,\"./vars\":9}],9:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dropdownDivCreated = exports.opRegex = exports.upArrow = exports.downArrow = void 0;\nvar downArrow = \"&#9660;\";\nexports.downArrow = downArrow;\nvar upArrow = \"&#9650;\";\nexports.upArrow = upArrow;\nvar opRegex = /(\\d+)(p(\\d)+)?.html$/;\nexports.opRegex = opRegex;\nvar dropdownDivCreated = false;\nexports.dropdownDivCreated = dropdownDivCreated;\n\n},{}]},{},[1,2,3,4,5,6,7,8,9]);\n"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_createForOfIteratorHelper","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","_unsupportedIterableToArray","F","s","done","value","_e","TypeError","err","normalCompletion","didErr","step","next","_e2","arr","len","arr2","getCookie","defaultVal","_step","val","_iterator","document","cookie","split","pair","decodeURIComponent","defineProperty","initCookies","$","setCookie","expires","expiresStr","d","Date","setTime","getTime","toUTCString","concat","escape","webroot","2","toTop","toBottom","changePage","sel","info","getPageThread","board","op","window","location","currentStaff","_cookies","_manage","_postutil","_settings","_topbar","_qr","_vars","scrollTo","body","scrollHeight","rootIndex","opRegex","exec","pathname","indexOf","substring","boardID","page","handleKeydown","ta","ss","se","tag","ctrlKey","target","nodeName","keyCode","getElementById","submit","preventDefault","selectionStart","selectionEnd","setSelectionRange","console","log","pageThread","style","defaultStyle","themeElem","setAttribute","getStaff","initTopBar","initSettings","TopBarButton","rank","prepareThumbnails","initQR","preparePostPreviews","click","block","this","parent","css","show","html","hide","stopPropagation","postID","attr","isOP","undefined","find","remove","menuHTML","append","keydown","./cookies","./manage","./postutil","./qr","./settings","./topbar","./vars","3","showLightBox","title","innerHTML","prepend","showMessage","msg","centeroffset","parseInt","replace","width","position","left","4","Staff","getManagePage","banSelectedPost","boardDirArr","boardDir","checks","alert","id","getStaffMenuHTML","ajax","method","url","data","action","dataType","cache","async","success","result","lines","trim","l","substr","text","error","openStaffLightBox","actionURL","$body","header","headerText","_lightbox","responseText","_defineProperties","props","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","usernameTxt","passwordTxt","rankSel","onManagePage","do","username","password","boards","rankStr","after","JSON","parse","Username","Rank","instance","_classCallCheck","./lightbox","5","getUploadPostID","upload","container","jqu","insideOP","siblings","eq","hidePost","posttext","fileinfo","postimg","isInline","_this","mType","movablePostPreviews","hvr_str","clkStr","hover","replaced","$clone","clone","class","bind","pageX","top","pageY","expandablePostrefs","$this","_this2","thumb","thumbURL","uploadURL","removeAttr","video","fileInfoElement","prevAll","videoTestRE","prop","src","autoplay","controls","loop","insertAfter","alt","padding-left","quote","msgboxID","selection","focus","getselection","createRange","scroll","offsetTop","elem","parents","deleteCheckedPosts","confirm","form","get","deletePost","prompt","reportPost","6","nameCookie","emailCookie","qrFormHTML","$qrbuttons","qrButtonHTML","$postform","enctype","qrTop","$topbar","outerHeight","qrPos","stringify","$qr","qrTitleBar","draggable","handle","containment","drag","event","ui","Math","max","topbarHeight","closeQR","downArrow","upArrow","7","getSetting","settings","settingsHTML","push","Setting","_step2","_iterator2","styles","options","Name","Filename","_step3","_iterator3","setting","$settingsMenu","_step4","_iterator4","save","getVal","newVal","cb","type","checked","option","8","padding-right","DropDownMenu","onOpen","arguments","onClose","toLowerCase","buttonOpen","self","titleLower","button","children","9","dropdownDivCreated"],"mappings":"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"}