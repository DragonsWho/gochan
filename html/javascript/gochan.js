!function n(i,a,r){function c(e,t){if(!a[e]){if(!i[e]){var o="function"==typeof require&&require;if(!t&&o)return o(e,!0);if(s)return s(e,!0);throw(o=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",o}o=a[e]={exports:{}},i[e][0].call(o.exports,function(t){return c(i[e][1][t]||t)},o,o.exports,n,i,a,r)}return a[e].exports}for(var s="function"==typeof require&&require,t=0;t<r.length;t++)c(r[t]);return c}({1:[function(t,e,o){"use strict";function r(t,e){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=function(t,e){if(t){if("string"==typeof t)return c(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(o="Object"===o&&t.constructor?t.constructor.name:o)||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var n=0,e=function(){};return{s:e,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,r=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return a=t.done,t},e:function(t){r=!0,i=t},f:function(){try{a||null==o.return||o.return()}finally{if(r)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}function n(t,e){var o,n=e,i=r(document.cookie.split("; "));try{for(i.s();!(o=i.n()).done;){var a=o.value.split("=");if(a[0]==t)try{n=decodeURIComponent(a[1])}catch(t){return e}}}catch(t){i.e(t)}finally{i.f()}return n}Object.defineProperty(o,"__esModule",{value:!0}),o.getCookie=n,o.initCookies=function(){$("input[name=postname]").val(n("name","")),$("input[name=postemail]").val(n("email","")),$("input[name=postpassword]").val(n("password","")),$("input[name=delete-password]").val(n("password",""))},o.setCookie=function(t,e,o){var n="";{var i;o&&(n=";expires=",(i=new Date).setTime(i.getTime()+864e5*o),n+=i.toUTCString())}document.cookie="".concat(t,"=").concat(escape(e)).concat(n,";path=").concat(webroot,";sameSite=strict")}},{}],2:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.toTop=u,o.toBottom=p,o.changePage=function(t){var e=f();""!=e.board&&-1!=e.op&&""!=t.value&&(window.location=webroot+e.board+"/res/"+e.op+"p"+t.value+".html")},o.getPageThread=f;var n,i=t("./cookies"),a=t("./manage"),r=t("./postutil"),c=t("./settings"),s=t("./topbar"),l=t("./qr"),d=t("./vars");function u(){window.scrollTo(0,0)}function p(){window.scrollTo(0,document.body.scrollHeight)}function f(){var t,e=d.opRegex.exec(window.location.pathname),t={board:(t=window.location.pathname.indexOf(webroot),t=0<(t=window.location.pathname.substring(t+webroot.length)).length&&-1<t.indexOf("/")?t.split("/")[0]:""),boardID:-1,op:-1,page:0};return null==e||(1<e.length&&(t.op=e[1]),3<e.length&&(t.page=e[3]),""!=e.board&&(t.boardID=$("form#postform input[name=boardid]").val()-1)),t}function h(t){var e,o,n,i,a="";if(t.ctrlKey&&"TEXTAREA"==t.target.nodeName){switch(t.keyCode){case 10:case 13:document.getElementById("postform").submit();break;case 66:a="b";break;case 73:a="i";break;case 82:a="s";break;case 83:a="?";break;case 85:a="u"}""!=a&&(t.preventDefault(),o=(e=t.target).value,n=e.selectionStart,t=(i=e.selectionEnd)+2+a.length,e.value=o.slice(0,n)+"["+a+"]"+o.slice(n,i)+"[/"+a+"]"+o.slice(i),e.setSelectionRange(t,t))}}console.log("Hello gochan.js!"),window.toTop=u,window.toBottom=p,$(function(){var t=f(),e=(0,i.getCookie)("style",defaultStyle),o=document.getElementById("theme");o&&o.setAttribute("href","".concat(webroot,"css/").concat(e)),n=(0,a.getStaff)(),(0,i.initCookies)(),(0,s.initTopBar)(),(0,c.initSettings)(),new s.TopBarButton("WT",function(){}),0<n.rank&&new s.TopBarButton("Staff",function(){window.location="/manage?action=dashboard"}),""!=t.board&&((0,r.prepareThumbnails)(),"true"==(0,i.getCookie)("useqr")&&(0,l.initQR)(t)),(0,r.preparePostPreviews)(!1),$(".plus").click(function(){var t=$(this).parent().next();"none"==t.css("display")?(t.show(),$(this).html("-")):(t.hide(),$(this).html("+"))});$(".thread-ddown a, body").click(function(t){t.stopPropagation();var e=$(this).parent().parent().parent().attr("id"),o="thread"==$(this).parent().parent().parent().attr("class");null!=e&&(0==$(this).parent().find("div.thread-ddown-menu").length?($("div.thread-ddown-menu").remove(),t='<div class="thread-ddown-menu" id="'.concat(e,'">'),o||(t+='<ul><li><a href="javascript:hidePost('.concat(e,');" class="hide-post">Show/Hide post</a></li>')),t+='<li><a href="javascript:deletePost('.concat(e,');" class="delete-post">Delete post</a></li>')+'<li><a href="javascript:reportPost('.concat(e,');" class="report-post">Report Post</a></li></ul></div>'),$(this).parent().append(t)):$("div.thread-ddown-menu").remove())}),$(document).keydown(h)})},{"./cookies":1,"./manage":4,"./postutil":5,"./qr":6,"./settings":7,"./topbar":8,"./vars":9}],3:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.showLightBox=function(t,e){$(document.body).prepend('<div class="lightbox-bg"></div><div class="lightbox"><div class="lightbox-title">'.concat(t,'<a href="#" class="lightbox-x">X</a><hr /></div>').concat(e,"</div>")),$("a.lightbox-x, .lightbox-bg").click(function(){$(".lightbox, .lightbox-bg").remove()})},o.showMessage=function(t){$(document.body).prepend('<div class="lightbox-bg"></div><div class="lightbox-msg">'.concat(t,'<br /><button class="lightbox-msg-ok" style="float: right; margin-top: 8px;">OK</button></div>'));t=parseInt($(".lightbox-msg").css("transform-origin").replace("px",""),10)+$(".lightbox-msg").width()/2;$(".lightbox-msg").css({position:"fixed",left:$(document).width()/2-t/2-16}),$(".lightbox-msg-ok, .lightbox-bg").click(function(){$(".lightbox-msg, .lightbox-bg").remove()})}},{}],4:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.getStaff=function(){return s.getStaff()},o.getManagePage=function(){},o.banSelectedPost=function(){var t=location.pathname.split("/");if(!(t.length<2)){var t=t[1],e=$("input[type=checkbox]");if(0==e.length)return alert("No posts selected"),!1;for(var o=0,n=0;n<e.length;n++)if(0==e[n].id.indexOf("check")){o=e[n].id.replace("check","");break}window.location="".concat(webroot,"manage?action=bans&dir=").concat(t,"&postid=").concat(o)}},o.getStaffMenuHTML=function(){var n='<ul class="staffmenu">';return $.ajax({method:"GET",url:webroot+"manage",data:{action:"staffmenu"},dataType:"text",cache:!0,async:!1,success:function(t){for(var e=t.substring(t.indexOf("body>")+5,t.indexOf("</body")).trim().split("\n"),o=0;o<e.length;o++)""!=e[o]&&(-1<e[o].indexOf("<a href=")?n+=e[o].substr(0,e[o].indexOf('">')+2)+"<li>"+$(e[o]).text()+"</li></a>":n+="<li>".concat(e[1],"</li>"))},error:function(){n="Something went wrong :/"}}),n+"</ul>"},o.openStaffLightBox=function(t){$.ajax({method:"GET",url:"".concat(webroot,"manage"),data:{action:t},dataType:"html",async:!1,success:function(t){var e='<div id="body-mock">'.concat(t.replace(/^[\s\S]*<body.*?>|<\/body>[\s\S]*$/gi,""),"</div>"),o=$(e),t=o.find("h1"),e=t.text();t.remove(),(0,n.showLightBox)(e=""==e?"Manage":e,o.html())},error:function(t){t=t.responseText;header=t.substring(t.indexOf("<h1>")+4,t.indexOf("</h1>")),t=t.substring(t.indexOf("</h1>")+5,t.indexOf("</body>")),""==header?(0,n.showLightBox)("Manage",t):(0,n.showLightBox)(header,t)}})},o.Staff=void 0;var n=t("./lightbox");function i(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a,r,c,s=(a=l,c=[{key:"makeNew",value:function(){var o,t,n,e=!1;return"/manage"==window.location.pathname?e=!0:(o=$("input#username").val(),t=$("input#password").val(),n=$("select#rank").val(),$.ajax({method:"POST",url:"".concat(webroot,"manage?action=staff"),data:{do:"add",username:o,password:t,rank:n,boards:"all"},cache:!1,async:!0,success:function(t){var e="";switch(n){case"3":e="admin";break;case"2":e="mod";break;case"1":e="janitor"}$("table#stafftable tr:last").after("<tr><td>".concat(o,"</td><td>").concat(e,"</td><td>all</td><td>now</td><td></td></tr>"))},error:function(){alert("Something went wrong...")}})),e}},{key:"getStaff",value:function(){var e=null;return $.ajax({method:"GET",url:"".concat(webroot,"manage"),data:{action:"getstaffjquery"},dataType:"text",cache:!0,async:!1,success:function(t){t=JSON.parse(t);e=new l(t.Username,t.Rank,"")},error:function(){e=new l("nobody","0","")}}),e}}],(r=null)&&i(a.prototype,r),c&&i(a,c),l);function l(t,e,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),this.name=t,this.rank=e,this.boards=o}o.Staff=s},{"./lightbox":3}],5:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.getUploadPostID=function(t,e){t=e?$(t):$(t).parent();return(n(t)?t.siblings().eq(4):t.siblings().eq(3)).text()},o.hidePost=function(t){var e=$("div#"+t+".post .posttext");0<e.length&&e.remove();e=$("div#"+t+".post .file-info");0<e.length&&e.remove();t=$("div#"+t+".post img");0<t.length&&t.remove()},o.insideOP=n,o.preparePostPreviews=function(t){var o=this,n="mousemove";i||(n="mouseover");t&&(hvr_str="div.inlinepostprev "+hvr_str);{var e;$("a.postref").hover(function(){var t=o.innerHTML.replace("&gt;&gt;",""),e="div.reply#reply".concat(t,",div.op-post#op").concat(t),t=$(e).clone();$(document.body).append(t.attr({class:"postprev",id:e+"preview"})),t.find(".inlinepostprev").remove(),$(document).bind(n,function(t){$(".postprev").css({left:t.pageX+8,top:t.pageY+8})})},function(){$(".postprev").remove()}),a&&(e="a.postref",t&&(e="div.inlinepostprev "+e),$(e).click(function(){var t,e=$(o);return"inlinepostprev"!=e.next().attr("class")?($(".postprev").remove(),t=o.innerHTML.replace("&gt;&gt;",""),t="div.reply#reply".concat(t,",div.op-post#op").concat(t),(t=$(t).clone()).find("postprev").remove(),e.after(t.attr("class","inlinepostprev"))):e.next().remove(),!1}))}},o.prepareThumbnails=function(){$("a.upload-container").click(function(t){var e=this;t.preventDefault();var t=$(this),o=t.find("img.upload"),n=o.attr("src"),i=o.attr("alt");o.removeAttr("width").removeAttr("height");var a,t=t.prevAll(".file-info:first");return r.test(n+i)?(o.hide(),a=$("<video />").prop({src:i,autoplay:!0,controls:!0,class:"upload",loop:!0}).insertAfter(t),t.append($("<a />").prop("href","javascript:;").click(function(t){a.remove(),o.show(),e.remove(),o.prop({src:n,alt:i})}).css({"padding-left":"8px"}).html("[Close]<br />"))):o.attr({src:i,alt:n}),!1})},o.quote=function(t){var e="postmsg";{var o,n;document.selection?(document.getElementById(e).focus(),document.getselection.createRange().text=">>".concat(t,"\n")):document.getElementById(e).selectionStart||"0"==document.getElementById(e).selectionStart?(o=document.getElementById(e).selectionStart,n=document.getElementById(e).selectionEnd,document.getElementById(e).value=document.getElementById(e).value.substring(0,o)+">>"+t+"\n"+document.getElementById(e).value.substring(n,document.getElementById(e).value.length)):document.getElementById(e).value+=">>".concat(t,"\n")}window.scroll(0,document.getElementById(e).offsetTop-48)};var i=null,a=!0,r=/\.(mp4)|(webm)$/;function n(t){return 0<$(t).parents("div.op-post").length}window.deleteCheckedPosts=function(){if(1!=confirm("Are you sure you want to delete these posts?"))return!1;var t=$("form#main-form");return t.append('<input type="hidden" name="action" value="delete" '),t.get(0).submit(),!0},window.deletePost=function(t,e){prompt("Password")},window.reportPost=function(t,e){prompt("Reason")}},{}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.initQR=function(t){var e=(0,i.getCookie)("name",""),o=(0,i.getCookie)("email",""),e='<input type="hidden" name="threadid" value="'.concat(t.op,'" />')+'<input type="hidden" name="boardid" value="1" />'+'<div id="qrpostname"><input id="qrpostname" type="text" name="postname" value="'.concat(e,'" placeholder="Name"/></div>')+'<div id="qrpostemail"><input id="qrpostemail" type="text" name="postemail" value="'.concat(o,'" placeholder="Email"/></div>')+'<div id="qrpostsubject"><input id="qrpostsubject" type="text" name="postsubject" placeholder="Subject"/></div><div id="qrpostmsg"><textarea id="qrpostmsg" name="postmsg" id="postmsg" placeholder="Message"></textarea></div>',o=$("<div />").prop("id","qrbuttons").append(c),e=$("<form />").prop({id:"qrpostform",name:"qrpostform",action:"/post",method:"POST",enctype:"multipart/form-data"}).append(e,o),o=32;(0,i.getCookie)("pintopbar",!0)||(o=a.$topbar.outerHeight()+16);o=JSON.parse((0,i.getCookie)("qrpos",JSON.stringify({top:o,left:16})));n.$qr=r=$("<div />").prop({id:"qr-box",style:"top: ".concat(o.top,"px;left: ").concat(o.left,"px; position:fixed;")}).append($(s),e).draggable({handle:"div#qr-title",scroll:!1,containment:"window",drag:function(t,e){e.position.top=Math.max(e.position.top,a.topbarHeight),(0,i.setCookie)("qrpos",JSON.stringify(e.position),7)}}).insertAfter("div#footer")},n.closeQR=l,n.$qr=void 0;var o=t("./vars"),i=t("./cookies"),a=t("./topbar"),r=null;n.$qr=r;var c='<input type="file" id="imagefile" name="imagefile" style="display: none;" /><input name="imagefilebtn" type="button" onclick="document.getElementById(\'imagefile\').click();" value="Browse..."><input type="submit" value="Post" style="float:right;"/>',s='<div id="qr-title"><span id="qr-message"></span>'+'<span id="qr-buttons"><a href="javascript:toBottom();">'.concat(o.downArrow,"</a>")+'<a href="javascript:toTop();">'.concat(o.upArrow,'</a><a href="javascript:closeQR();">X</a></span></div>');function l(){r&&r.remove()}window.closeQR=l},{"./cookies":1,"./topbar":8,"./vars":9}],7:[function(t,e,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getSetting=function(t){for(var e=0;e<f.length;e++)if(f[e].id==t)return f[e];return{}},c.initSettings=function(){var t='<div id="settings-container" style="overflow:auto"><table width="100%"><colgroup><col span="1" width="50%"><col span="1" width="50%"></colgroup>';f.push(new h("style","Style","select",defaultStyle,function(){document.getElementById("theme").setAttribute("href","".concat(webroot,"css/").concat(this.getCookie(defaultStyle)))},[]),new h("pintopbar","Pin top bar","checkbox",!0),new h("enableposthover","Preview post on hover","checkbox",!0),new h("enablepostclick","Preview post on click","checkbox",!0),new h("useqr","Use Quick Reply box","checkbox",!0));var e,o=d(styles);try{for(o.s();!(e=o.n()).done;){var n=e.value;f[0].options.push({text:n.Name,val:n.Filename})}}catch(t){o.e(t)}finally{o.f()}var i,a=d(f);try{for(a.s();!(i=a.n()).done;){var r=i.value;t+="<tr><td><b>".concat(r.text,";</b></td><td>").concat(r.html(),"</td></tr>")}}catch(t){a.e(t)}finally{a.f()}t+='</table></div><div class="lightbox-footer"><hr /><button id="save-settings-button">Save Settings</button></div>',c.$settingsMenu=p=new l.TopBarButton("Settings",function(){(0,s.showLightBox)("Settings",t),$("button#save-settings-button").click(function(){var t,e=d(f);try{for(e.s();!(t=e.n()).done;){var o=t.value;o.save(o.getVal())}}catch(t){e.e(t)}finally{e.f()}})})},c.settings=c.$settingsMenu=void 0;var s=t("./lightbox"),l=t("./topbar"),r=t("./cookies");function d(t,e){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=function(t,e){if(t){if("string"==typeof t)return u(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(o="Object"===o&&t.constructor?t.constructor.name:o)||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var n=0,e=function(){};return{s:e,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,r=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return a=t.done,t},e:function(t){r=!0,i=t},f:function(){try{a||null==o.return||o.return()}finally{if(r)throw i}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}function o(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var p=null;c.$settingsMenu=p;var f=[];c.settings=f;var n,i,a,h=(n=v,(i=[{key:"save",value:function(t,e){(0,r.setCookie)(this.id,t,e),this.cb()}},{key:"getCookie",value:function(t){t=(0,r.getCookie)(this.id,t);return t="checkbox"==this.type?"true"==t:t}},{key:"setCookie",value:function(t,e){(0,r.setCookie)(this.id,t,e)}},{key:"getVal",value:function(){var t=document.getElementById(this.id);if(null!=t)return"checkbox"==t.type?t.checked:t.value}},{key:"html",value:function(){var t="";switch(this.type){case"checkbox":t=1==this.getCookie()?'<input id="'.concat(this.id,'" type="checkbox" checked="checked" />'):'<input id="'.concat(this.id,'" type="checkbox" />');break;case"select":t='<select id="'.concat(this.id,'" name="').concat(this.id,'" style="min-width:50%">');var e,o=d(this.options);try{for(o.s();!(e=o.n()).done;){var n=e.value;t+='<option value="'.concat(n.val,'"'),this.getCookie()==n.val&&(t+='selected="'.concat(this.getCookie(),'"')),t+=">".concat(n.text,"</option>")}}catch(t){o.e(t)}finally{o.f()}t+="</select>";break;case"textarea":t='<textarea id="'.concat(this.id,'" name="').concat(this.id,'">').concat(this.getCookie(),"</textarea>");break;default:t='<input id="'.concat(this.id,'" type="checkbox" val="').concat(this.getCookie(),'" />')}return t}}])&&o(n.prototype,i),a&&o(n,a),v);function v(t,e,o,n,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),this.id=t,this.text=e,this.type=o,this.defaultVal=n,this.options=[],null==(0,r.getCookie)(this.id)&&this.setCookie(this.defaultVal,7),"select"==this.type&&(this.options=a),this.cb=function(){},i&&(this.cb=i)}},{"./cookies":1,"./lightbox":3,"./topbar":8}],8:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.initTopBar=function(){o.$topbar=c=$("div#topbar"),(0,n.getCookie)("pintopbar",!0)||c.css({position:"absolute",top:"0px","padding-left":"0px","padding-right":"0px"});o.topbarHeight=i=c.outerHeight()+4},o.DropDownMenu=o.TopBarButton=o.topbarHeight=o.$topbar=void 0;var a=t("./vars"),n=t("./cookies");function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=null;o.$topbar=c;var i=32;o.topbarHeight=i;function s(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){};r(this,s),this.title=t,this.onOpen=e,this.onClose=o,c.append('<a href="javascript:;" class="dropdown-button" id="'.concat(t.toLowerCase(),'">').concat(t).concat(a.downArrow,"</a>"));var n=!1,i=this;c.find("a#"+t.toLowerCase()).click(function(t){return n=n?(i.onClose(),!1):(i.onOpen(),$(document).bind("click",function(){i.onClose()}),!0),!1})}o.TopBarButton=s,o.DropDownMenu=function t(e,o){r(this,t),this.title=e,this.menuHTML=o;var n=e.toLowerCase();this.button=new s(e,function(){c.after('<div id="'.concat(n,'-menu" class="dropdown-menu">').concat(o,"</div>")),$("a#".concat(n,"-menu")).children(0).text(e+a.upArrow),$("div#".concat(n)).css({top:c.outerHeight()})},function(){$("div#".concat(n,".dropdown-menu")).remove(),$("a#".concat(n,"-menu")).children(0).html(e+a.downArrow)})}},{"./cookies":1,"./vars":9}],9:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.dropdownDivCreated=o.opRegex=o.upArrow=o.downArrow=void 0;o.downArrow="&#9660;";o.upArrow="&#9650;";o.opRegex=/(\d+)(p(\d)+)?.html$/;o.dropdownDivCreated=!1},{}]},{},[1,2,3,4,5,6,7,8,9]);
//# sourceMappingURL=maps/gochan.js.map
